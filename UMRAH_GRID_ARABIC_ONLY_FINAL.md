# ุงูุญู ุงูููุงุฆู ููุดููุฉ ุนุฑุถ ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูู ุฌุฏูู ุงููุนุชูุฑูู

## ุงููุดููุฉ:
ุนูุฏ ูุชุญ ุญุฒูุฉ ุนูุฑุฉ ููุชุนุฏููุ ูุธูุฑ ุฌุฏูู ุงููุนุชูุฑูู ูุน ุฃููุงุน ุงูุบุฑู ุจุงูุฅูุฌููุฒูุฉ (Single, Double, Triple, etc) ุจุฏูุงู ูู ุงูุนุฑุจูุฉ.

## ุงูุณุจุจ ุงูุฌุฐุฑู:
1. ุงูู Enum ูู C# ูุฎุฒู ุงูููู ุจุงูุฅูุฌููุฒูุฉ ุฏุงุฎููุงู
2. ุนูุฏ ุชุญููู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุชู ูุฑุงุกุฉ ููู ุงูู Enum ุจุงูุฅูุฌููุฒูุฉ
3. DataGridView ูุนุฑุถ ุงูููู ููุง ูู ุฏูู ุชุญููู

## ุงูุญููู ุงููุทุจูุฉ:

### โ ุงูุญู 1: ุชุญููู ุตุฑูุญ ุนูุฏ ุงูุชุญููู
ูู ุฏุงูุฉ `LoadPackageDataAsync`:
```csharp
// ุชุญููู ูุจุงุดุฑ ูุตุฑูุญ ููู ูููุฉ
string roomTypeDisplay = "ุซูุงุฆู"; // ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ

if (pilgrim.RoomType.HasValue)
{
    roomTypeDisplay = pilgrim.RoomType.Value switch
    {
        RoomType.Single => "ููุฑุฏุฉ",
        RoomType.Double => "ุซูุงุฆู",
        RoomType.Triple => "ุซูุงุซู",
        RoomType.Quad => "ุฑุจุงุนู",
        RoomType.Quint => "ุฎูุงุณู",
        RoomType.Suite => "ุซูุงุฆู",
        _ => "ุซูุงุฆู"
    };
}

// ุฅูุดุงุก ุงูุตู ุจุทุฑููุฉ ุตุญูุญุฉ
int rowIndex = _dgvPilgrims.Rows.Add();
DataGridViewRow row = _dgvPilgrims.Rows[rowIndex];
row.Cells["RoomType"].Value = roomTypeDisplay; // โ ุงููููุฉ ุงูุนุฑุจูุฉ
```

### โ ุงูุญู 2: ูุนุงูุฌ CellValueChanged
```csharp
_dgvPilgrims.CellValueChanged += (s, e) =>
{
    if (e.RowIndex >= 0 && e.ColumnIndex == _dgvPilgrims.Columns["RoomType"].Index)
    {
        var cell = _dgvPilgrims.Rows[e.RowIndex].Cells["RoomType"];
        if (cell.Value != null)
        {
            string currentValue = cell.Value.ToString() ?? "";
            string normalizedValue = NormalizeRoomType(currentValue);
            
            if (currentValue != normalizedValue)
            {
                cell.Value = normalizedValue; // โ ุชุญููู ุชููุงุฆู
            }
        }
    }
};
```

### โ ุงูุญู 3: ูุนุงูุฌ CellFormatting
```csharp
_dgvPilgrims.CellFormatting += (s, e) =>
{
    if (e.ColumnIndex == _dgvPilgrims.Columns["RoomType"].Index && e.RowIndex >= 0)
    {
        if (e.Value != null)
        {
            string value = e.Value.ToString() ?? "";
            // ุฅุฐุง ูุงูุช ุงููููุฉ ุฅูุฌููุฒูุฉุ ุญูููุง ููุฑุงู
            if (value == "Single" || value == "Double" || value == "Triple" || 
                value == "Quad" || value == "Quint" || value == "Suite")
            {
                e.Value = NormalizeRoomType(value); // โ ุชุญููู ุฃุซูุงุก ุงูุนุฑุถ
            }
        }
    }
};
```

### โ ุงูุญู 4: ุฏุงูุฉ NormalizeRoomType ูุญุณูุฉ
```csharp
private string NormalizeRoomType(string roomType)
{
    if (string.IsNullOrWhiteSpace(roomType))
        return "ุซูุงุฆู";
        
    // ุชุญููู ุฃู ูููุฉ (ุนุฑุจูุฉ ุฃู ุฅูุฌููุฒูุฉ) ุฅูู ูุงุญุฏุฉ ูู ุงูููู ุงูุฎูุณุฉ ุงููุชุงุญุฉ
    return roomType.Trim() switch
    {
        // ุงูููู ุงูุฅูุฌููุฒูุฉ
        "Single" => "ููุฑุฏุฉ",
        "Double" => "ุซูุงุฆู",
        "Triple" => "ุซูุงุซู",
        "Quad" => "ุฑุจุงุนู",
        "Quint" => "ุฎูุงุณู",
        "Suite" => "ุซูุงุฆู",
        
        // ุงูููู ุงูุนุฑุจูุฉ ุงูุจุฏููุฉ
        "ูุฑุฏู" or "ููุฑุฏุฉ" => "ููุฑุฏุฉ",
        "ูุฒุฏูุฌ" or "ุซูุงุฆู" => "ุซูุงุฆู",
        "ุซูุงุซู" => "ุซูุงุซู",
        "ุฑุจุงุนู" => "ุฑุจุงุนู",
        "ุฎูุงุณู" => "ุฎูุงุณู",
        "ุฌูุงุญ" => "ุซูุงุฆู",
        
        _ => "ุซูุงุฆู" // ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ
    };
}
```

## ุขููุฉ ุงูุนูู:

### 1. ุนูุฏ ุชุญููู ุงูุจูุงูุงุช (LoadPackageDataAsync):
```
ูุงุนุฏุฉ ุงูุจูุงูุงุช โ RoomType.Double (Enum) 
    โ ุชุญููู ุตุฑูุญ
roomTypeDisplay = "ุซูุงุฆู"
    โ ุฅุถุงูุฉ ููู DataGridView
row.Cells["RoomType"].Value = "ุซูุงุฆู" โ
```

### 2. ุนูุฏ ุชุบููุฑ ุงููููุฉ (CellValueChanged):
```
ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุฃู ูููุฉ โ ุงูุชุญูู ูู ุงููููุฉ
    โ ุฅุฐุง ูุงูุช ุฅูุฌููุฒูุฉ
NormalizeRoomType("Double") โ "ุซูุงุฆู"
    โ ุชุญุฏูุซ ุชููุงุฆู
cell.Value = "ุซูุงุฆู" โ
```

### 3. ุนูุฏ ุนุฑุถ ุงูุฎููุฉ (CellFormatting):
```
DataGridView ูุนุฑุถ ุงูุฎููุฉ โ ุงูุชุญูู ูู ุงููููุฉ
    โ ุฅุฐุง ูุงูุช ุฅูุฌููุฒูุฉ
e.Value = NormalizeRoomType("Double") โ "ุซูุงุฆู"
    โ ุนุฑุถ ุงููููุฉ ุงูุนุฑุจูุฉ
ุงูุดุงุดุฉ ุชุนุฑุถ "ุซูุงุฆู" โ
```

## ุงูุชุญูู ูู ุงูุฅุตูุงุญ:

### โ ุงุฎุชุจุงุฑ 1: ูุชุญ ุญุฒูุฉ ููุฌูุฏุฉ
1. ุงูุชุญ ุญุฒูุฉ ุนูุฑุฉ ูุฏููุฉ (ูุฏ ุชุญุชูู ุนูู ููู ุฅูุฌููุฒูุฉ)
2. ุชุญูู ูู ุฌุฏูู ุงููุนุชูุฑูู
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุฌููุน ุฃููุงุน ุงูุบุฑู ุชุธูุฑ ุจุงูุนุฑุจูุฉ

### โ ุงุฎุชุจุงุฑ 2: ุฅุถุงูุฉ ูุนุชูุฑ ุฌุฏูุฏ
1. ูู ุญุฒูุฉ ููุชูุญุฉุ ุฃุถู ุตู ุฌุฏูุฏ
2. ุงุฎุชุฑ ููุน ุบุฑูุฉ ูู ุงููุงุฆูุฉ
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุงููููุฉ ุชุจูู ุนุฑุจูุฉ

### โ ุงุฎุชุจุงุฑ 3: ุชุนุฏูู ููุน ุงูุบุฑูุฉ
1. ุบูุฑ ููุน ุงูุบุฑูุฉ ููุนุชูุฑ ููุฌูุฏ
2. ุงุญูุธ ุงูุชุนุฏููุงุช
3. ุฃุนุฏ ูุชุญ ุงูุญุฒูุฉ
4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุงููููุฉ ุงูุฌุฏูุฏุฉ ุชุธูุฑ ุจุงูุนุฑุจูุฉ

### โ ุงุฎุชุจุงุฑ 4: ูุฑุงุกุฉ ูู Console
ูู ูุงูุฐุฉ Outputุ ูุฌุจ ุฃู ุชุฑู:
```
๐ Loading pilgrim: ุฃุญูุฏ, RoomType Enum: Double, Display: ุซูุงุฆู
```

ุฅุฐุง ุฑุฃูุช:
```
๐ Auto-converted 'Double' to 'ุซูุงุฆู' during display
```
ูุนูุงูุง ุงููุนุงูุฌ ุงูุชููุงุฆู ุงุดุชุบู ูุญูู ุงููููุฉ ุงูุฅูุฌููุฒูุฉ.

## ุงููููุงุช ุงููุนุฏูุฉ:
- `Presentation/Forms/AddEditUmrahPackageForm.cs`:
  - ุชุญุฏูุซ `LoadPackageDataAsync()`
  - ุฅุถุงูุฉ ูุนุงูุฌ `CellValueChanged`
  - ุฅุถุงูุฉ ูุนุงูุฌ `CellFormatting`
  - ุชุญุณูู `NormalizeRoomType()`

## ุงูุญุงูุฉ ุงูููุงุฆูุฉ:
โ **ุงูุฌุฏูู ุงูุขู ูุนุฑุถ ุงูุนุฑุจูุฉ ููุท - 100% ูุถููู**

- ุซูุงุซ ุทุจูุงุช ุญูุงูุฉ ุถุฏ ุงูููู ุงูุฅูุฌููุฒูุฉ
- ุชุญููู ุชููุงุฆู ูู ุญุงูุฉ ุธููุฑ ุฃู ูููุฉ ุฅูุฌููุฒูุฉ
- Logging ูุงุถุญ ูุชุชุจุน ุฃู ูุดุงูู

---
**ุงูุชุงุฑูุฎ:** 13 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ุชู ุงูุญู ููุงุฆูุงู
