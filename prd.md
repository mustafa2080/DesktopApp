# وثيقة متطلبات المنتج (PRD)

## نظام محاسبي وتشغيلي متكامل لشركة سياحة

## Desktop Application باستخدام Windows Forms C#

---

## 1. نظرة عامة

هذا النظام عبارة عن **تطبيق سطح مكتب (Desktop)** مخصص لشركات السياحة، مبني باستخدام **Windows Forms C# (.NET)**، يعمل باللغة العربية مع دعم **Right-To-Left (RTL)**، ويهدف إلى ربط العمليات التشغيلية (الحجوزات والخدمات السياحية) بالعمليات المحاسبية بشكل آلي، مع توفير تقارير مالية وتشغيلية احترافية ولوحات تحكم تحتوي على رسوم بيانية.

النظام مصمم ليعمل **بدون إنترنت** داخل الشركة، مع أداء عالي واستقرار، وتصميم عصري مناسب لبيئة العمل المكتبية.

---

## 2. أهداف النظام

* إدارة جميع أقسام شركة السياحة من نظام واحد
* ربط تلقائي بين الحجوزات والحسابات
* تقليل الأخطاء المحاسبية اليدوية
* توفير تقارير دقيقة وفورية
* واجهة استخدام عربية واضحة وسهلة
* قابلية التوسع مستقبلاً

---

## 3. المستخدمون المستهدفون

* موظف حجوزات
* محاسب
* مدير مالي
* مدير الشركة

---

## 4. نطاق العمل

### داخل النطاق

* تطبيق Desktop (Windows)
* Windows Forms C#
* لغة عربية كاملة (RTL)
* قاعدة بيانات PostgreSQL
* Architecture متعددة الطبقات (Layers)
* تقارير وشارتات احترافية

### خارج النطاق (المرحلة الأولى)

* تطبيق موبايل
* نظام أونلاين متعدد الفروع

---

## 5. التقنيات المستخدمة

### واجهة المستخدم

* Windows Forms (.NET)
* Custom Controls
* GDI+ / Libraries للشارتات

### منطق التطبيق

* C# (.NET)
* Dependency Injection

### قاعدة البيانات

* PostgreSQL
* ORM: Entity Framework Core / Dapper

### التقارير

* RDLC / FastReport / DevExpress Reports

---

## 6. البنية المعمارية (Layers)

1. Presentation Layer (Windows Forms UI)
2. Application Layer (Use Cases / Services)
3. Domain Layer (Business Rules)
4. Infrastructure Layer (Database / Repositories)
5. Reporting Layer

### ملاحظات معمارية

* عدم ربط الفورم مباشرة بقاعدة البيانات
* كل العمليات تمر عبر Services
* Transaction Management في Application Layer

---

## 7. نظام التصميم (Design System)

### 7.1 مبادئ التصميم

* RTL First
* تصميم نظيف وعصري
* ألوان هادئة مناسبة للعمل الطويل
* سهولة الاستخدام للمحاسبين

### 7.2 الألوان

* اللون الأساسي: أزرق داكن
* الثانوي: أخضر
* النجاح: أخضر فاتح
* التحذير: برتقالي
* الخطأ: أحمر
* الخلفية: رمادي فاتح

### 7.3 الخطوط

* Segoe UI / Cairo
* عناوين واضحة
* تباعد مريح

### 7.4 مكونات الواجهة

* Main Form (MDI)
* Sidebar Navigation
* DataGridView مخصص
* Forms لإدخال البيانات
* Dialogs للتأكيد
* Toast / Message Alerts

---

## 8. قاعدة البيانات (PostgreSQL)

### الجداول الأساسية

* Users
* Roles
* Permissions
* Customers
* Suppliers
* Reservations
* Services
* SalesInvoices
* PurchaseInvoices
* Accounts
* JournalEntries
* JournalEntryLines
* CashBoxes
* BankAccounts
* Payments

---

## 9. تقسيم النظام إلى وحدات وتاسكات صغيرة

---

## 9.1 تسجيل الدخول والصلاحيات

### التاسكات

* [ ] شاشة تسجيل دخول
* [ ] تشفير كلمات المرور
* [ ] إدارة الصلاحيات حسب الدور

### الحالات الخاصة

* مستخدم موقوف
* محاولات دخول فاشلة

---

## 9.2 الإعدادات العامة

### التاسكات

* [ ] بيانات الشركة
* [ ] إعداد السنة المالية
* [ ] العملات
* [ ] الضرائب

### الحالات الخاصة

* منع تعديل الإعدادات بعد وجود حركات

---

## 9.3 شجرة الحسابات

### التاسكات

* [ ] عرض شجري للحسابات
* [ ] إضافة وتعديل حساب
* [ ] ربط الحسابات بالأنشطة

### الحالات الخاصة

* منع حذف حساب له قيود

---

## 9.4 إدارة العملاء

### التاسكات

* [ ] إضافة وتعديل عميل
* [ ] رصيد افتتاحي
* [ ] كشف حساب عميل

### الحالات الخاصة

* تجاوز الحد الائتماني

---

## 9.5 إدارة الموردين

### التاسكات

* [ ] إضافة وتعديل مورد
* [ ] كشف حساب مورد

---

## 9.6 الحجوزات (Core Module)

### التاسكات

* [ ] إنشاء حجز
* [ ] اختيار نوع الخدمة
* [ ] حساب التكلفة والربح
* [ ] تغيير حالة الحجز

### الحالات الخاصة

* إلغاء الحجز
* تعديل السعر بعد التأكيد

---

## 9.7 فواتير البيع

### التاسكات

* [ ] إنشاء فاتورة بيع
* [ ] احتساب الضريبة
* [ ] إنشاء قيد محاسبي تلقائي

### الحالات الخاصة

* فاتورة جزئية

---

## 9.8 فواتير الشراء

### التاسكات

* [ ] إدخال فاتورة مورد
* [ ] اختلاف العملة

---

## 9.9 الخزنة والبنوك

### التاسكات

* [ ] تعريف خزنة وبنك
* [ ] سند قبض
* [ ] سند صرف
* [ ] تحويل داخلي

### الحالات الخاصة

* منع الرصيد السالب

---

## 9.10 القيود اليومية

### التاسكات

* [ ] قيود تلقائية
* [ ] قيود يدوية (بصلاحيات)

---

## 9.11 التقارير

### التقارير المحاسبية

* ميزان المراجعة
* قائمة الدخل
* المركز المالي

### التقارير التشغيلية

* أرباح الحجوزات
* أرباح العملاء

### التاسكات

* [ ] فلاتر تاريخ
* [ ] طباعة وتصدير PDF / Excel

---

## 9.12 لوحة التحكم والشارتات

### الشارتات

* مبيعات (أعمدة)
* تدفقات نقدية (خطي)
* توزيع الإيرادات (دائري)

### التاسكات

* [ ] Dashboard رئيسي
* [ ] شارتات لكل قسم

---

## 10. التحقق ومعالجة الأخطاء

* Validation لكل المدخلات
* Transaction Rollback
* رسائل خطأ واضحة

---

## 11. المتطلبات غير الوظيفية

* أداء عالي
* استقرار
* سهولة الصيانة
* Logging & Audit Trail

---



**نهاية وثيقة PRD**
