# โ ุฅุถุงูุฉ ุญููู ููุน ุงูุบุฑูุฉ ูุฑูู ุงูุบุฑูุฉ ุงููุดุชุฑูุฉ ูููุนุชูุฑูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ุฅููุงููุฉ ุชุญุฏูุฏ **ููุน ุงูุบุฑูุฉ** ููู ูุนุชูุฑ ู **ุฑูู ุงูุบุฑูุฉ ุงููุดุชุฑูุฉ** ูุฑุจุท ุงููุนุชูุฑูู ุงูุฐูู ูุดุชุฑููู ูู ููุณ ุงูุบุฑูุฉ.

---

## ๐๏ธ ุงูุชุนุฏููุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 1๏ธโฃ Entity: UmrahPilgrim.cs

ุชู ุฅุถุงูุฉ ุญูููู ุฌุฏูุฏูู:

```csharp
/// <summary>
/// ููุน ุงูุบุฑูุฉ ุงูุฎุงุต ุจุงููุนุชูุฑ
/// </summary>
public RoomType? RoomType { get; set; }

/// <summary>
/// ุฑูู ุงูุบุฑูุฉ ุงููุดุชุฑูุฉ (ูุฑุจุท ุงููุนุชูุฑูู ูู ููุณ ุงูุบุฑูุฉ)
/// ูุซุงู: "R001" - ุฌููุน ุงููุนุชูุฑูู ุจููุณ ุฑูู ุงูุบุฑูุฉ ูุดุชุฑููู ูู ุบุฑูุฉ ูุงุญุฏุฉ
/// </summary>
[MaxLength(20)]
public string? SharedRoomNumber { get; set; }
```

### 2๏ธโฃ Migration: AddRoomFieldsToUmrahPilgrim

```sql
-- ุฅุถุงูุฉ ุนููุฏ ููุน ุงูุบุฑูุฉ
ALTER TABLE UmrahPilgrims 
ADD COLUMN RoomType INTEGER NULL;

-- ุฅุถุงูุฉ ุนููุฏ ุฑูู ุงูุบุฑูุฉ ุงููุดุชุฑูุฉ
ALTER TABLE UmrahPilgrims 
ADD COLUMN SharedRoomNumber TEXT(20) NULL;

-- ุฅูุดุงุก ููุฑุณ ูุชุณุฑูุน ุงูุจุญุซ
CREATE INDEX IX_UmrahPilgrims_SharedRoomNumber 
ON UmrahPilgrims(SharedRoomNumber);
```

---

## ๐จ ุงูุชุนุฏููุงุช ุนูู ุงููุงุฌูุฉ

### โ ุฌุฏูู ุงููุนุชูุฑูู (DataGridView)

ุชู ุฅุถุงูุฉ ุนููุฏูู ุฌุฏูุฏูู:

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| **ููุน ุงูุบุฑูุฉ** | ComboBox | ุงุฎุชูุงุฑ ูู: ููุฑุฏุฉุ ุซูุงุฆูุ ุซูุงุซูุ ุฑุจุงุนูุ ุฎูุงุณู |
| **ุฑูู ุงูุบุฑูุฉ** | TextBox | ุฑูู ุงูุบุฑูุฉ ุงููุดุชุฑูุฉ (ูุซู: R001, R002) |

### ๐ ุดูู ุงูุฌุฏูู ุงูุฌุฏูุฏ:

```
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ุฑูู  โ  ุงุณู ุงููุนุชูุฑ    โ ููุน ุงูุบุฑูุฉ   โ ุฑูู ุงูุบุฑูุฉ   โ
โโโโโโโโผโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโค
โ  1   โ ุฃุญูุฏ ูุญูุฏ       โ ุซูุงุฆู โผ     โ R001         โ
โ  2   โ ูุญููุฏ ุนูู       โ ุซูุงุฆู โผ     โ R001         โ
โ  3   โ ุฎุงูุฏ ุญุณู        โ ููุฑุฏุฉ โผ     โ R002         โ
โ  4   โ ุนูุฑ ุณุนูุฏ        โ ุซูุงุซู โผ     โ R003         โ
โโโโโโโโดโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
```

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1๏ธโฃ ุฅุถุงูุฉ ุญุฒูุฉ ุฌุฏูุฏุฉ

1. ุงูุชุญ "ุฅุถุงูุฉ ุญุฒูุฉ ุนูุฑุฉ ุฌุฏูุฏุฉ"
2. ุฃุฏุฎู ุนุฏุฏ ุงูุฃูุฑุงุฏ
3. ูู ุฌุฏูู ุงููุนุชูุฑูู:
   - ุฃุฏุฎู **ุงุณู ุงููุนุชูุฑ**
   - ุงุฎุชุฑ **ููุน ุงูุบุฑูุฉ** ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
   - ุฃุฏุฎู **ุฑูู ุงูุบุฑูุฉ** (ุงุฎุชูุงุฑู)

### 2๏ธโฃ ุฑุจุท ูุนุชูุฑูู ูู ููุณ ุงูุบุฑูุฉ

ูุฑุจุท ูุนุชูุฑูู ูู ููุณ ุงูุบุฑูุฉุ ุงูุชุจ **ููุณ ุฑูู ุงูุบุฑูุฉ** ูุฌููุน ุงููุนุชูุฑูู:

**ูุซุงู:**

```
ุงููุนุชูุฑ 1: ุฃุญูุฏ ูุญูุฏ    โ ููุน ุงูุบุฑูุฉ: ุซูุงุฆู โ ุฑูู ุงูุบุฑูุฉ: R001
ุงููุนุชูุฑ 2: ูุญููุฏ ุนูู     โ ููุน ุงูุบุฑูุฉ: ุซูุงุฆู โ ุฑูู ุงูุบุฑูุฉ: R001
ุงููุนุชูุฑ 3: ุฎุงูุฏ ุญุณู      โ ููุน ุงูุบุฑูุฉ: ููุฑุฏุฉ โ ุฑูู ุงูุบุฑูุฉ: R002
ุงููุนุชูุฑ 4: ุนูุฑ ุณุนูุฏ      โ ููุน ุงูุบุฑูุฉ: ุซูุงุซู โ ุฑูู ุงูุบุฑูุฉ: R003
ุงููุนุชูุฑ 5: ุนูู ุฃุญูุฏ      โ ููุน ุงูุบุฑูุฉ: ุซูุงุซู โ ุฑูู ุงูุบุฑูุฉ: R003
ุงููุนุชูุฑ 6: ุณุนูุฏ ูุญูุฏ     โ ููุน ุงูุบุฑูุฉ: ุซูุงุซู โ ุฑูู ุงูุบุฑูุฉ: R003
```

ูู ูุฐุง ุงููุซุงู:
- โ ุฃุญูุฏ ููุญููุฏ ูุดุชุฑููู ูู ุบุฑูุฉ R001 (ุซูุงุฆู)
- โ ุฎุงูุฏ ูู ุบุฑูุฉ R002 ูุญุฏู (ููุฑุฏุฉ)
- โ ุนูุฑ ูุนูู ูุณุนูุฏ ูุดุชุฑููู ูู ุบุฑูุฉ R003 (ุซูุงุซู)

---

## ๐ ููุงุฆุฏ ุงููุธุงู ุงูุฌุฏูุฏ

### โ ุฅุฏุงุฑุฉ ุฃูุถู ููุบุฑู:
- ูุนุฑูุฉ ููุน ุบุฑูุฉ ูู ูุนุชูุฑ
- ุฑุจุท ุงููุนุชูุฑูู ุงููุดุชุฑููู ูู ููุณ ุงูุบุฑูุฉ
- ุณูููุฉ ุงูุจุญุซ ุนู ูุนุชูุฑูู ูู ููุณ ุงูุบุฑูุฉ

### โ ุชูุงุฑูุฑ ูุญุณููุฉ:
- ุชูุฑูุฑ ุชูุฒูุน ุงูุบุฑู ุญุณุจ ุงูููุน
- ุนุฏุฏ ุงูุบุฑู ุงููุณุชุฎุฏูุฉ
- ุงููุนุชูุฑูู ูู ูู ุบุฑูุฉ

### โ ูุฑููุฉ ูู ุงูุชุนุฏูู:
- ูููู ุชุบููุฑ ููุน ุงูุบุฑูุฉ ูุฃู ูุนุชูุฑ
- ูููู ุฅุนุงุฏุฉ ุชูุฒูุน ุงููุนุชูุฑูู ุนูู ุงูุบุฑู
- ูููู ุชุฑู ุฑูู ุงูุบุฑูุฉ ูุงุฑุบุงู ุฅุฐุง ูู ูุชู ุงูุชูุฒูุน ุจุนุฏ

---

## ๐ ุงุณุชุนูุงูุงุช ูููุฏุฉ

### ุงูุจุญุซ ุนู ูุนุชูุฑูู ูู ููุณ ุงูุบุฑูุฉ:

```csharp
var roommates = pilgrims
    .Where(p => p.SharedRoomNumber == "R001")
    .ToList();
```

### ุฅุญุตุงุฆูุงุช ุงูุบุฑู:

```csharp
// ุนุฏุฏ ุงูุบุฑู ุงููุณุชุฎุฏูุฉ
var roomCount = pilgrims
    .Where(p => !string.IsNullOrEmpty(p.SharedRoomNumber))
    .Select(p => p.SharedRoomNumber)
    .Distinct()
    .Count();

// ุชูุฒูุน ุญุณุจ ููุน ุงูุบุฑูุฉ
var roomTypeDistribution = pilgrims
    .GroupBy(p => p.RoomType)
    .Select(g => new { RoomType = g.Key, Count = g.Count() })
    .ToList();
```

---

## ๐๏ธ ุงููููุงุช ุงููุนุฏููุฉ

โ `Domain/Entities/UmrahPilgrim.cs` - ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ
โ `Infrastructure/Migrations/AddRoomFieldsToUmrahPilgrim.cs` - Migration
โ `Presentation/Forms/AddEditUmrahPackageForm.cs` - ุชุญุฏูุซ ุงููุงุฌูุฉ
  - ุฅุถุงูุฉ ุฃุนูุฏุฉ ุฌุฏูุฏุฉ ููุฌุฏูู
  - ุชุญุฏูุซ UpdatePilgrimsList()
  - ุชุญุฏูุซ LoadPackageDataAsync()
  - ุชุญุฏูุซ BtnSave_Click()
  - ุฅุถุงูุฉ helper methods

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุฑูู ุงูุบุฑูุฉ ุงุฎุชูุงุฑู** - ูููู ุชุฑู ุงูุญูู ูุงุฑุบุงู
2. **ููุน ุงูุบุฑูุฉ ุงูุชุฑุงุถู** - ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู "ุซูุงุฆู"
3. **ุฑูู ุงูุบุฑูุฉ ูุฌุจ ุฃู ูููู ูุฑูุฏุงู** - ููู ุบุฑูุฉ ุฑูู ูุฎุชูู
4. **ุงูุญุฏ ุงูุฃูุตู ูุทูู ุฑูู ุงูุบุฑูุฉ** - 20 ุญุฑู
5. **ุงูููุฑุณ ุนูู SharedRoomNumber** - ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### 1๏ธโฃ ุชุดุบูู Migration:

```bash
# ูู Package Manager Console
Update-Database

# ุฃู ุนุจุฑ .NET CLI
dotnet ef database update
```

### 2๏ธโฃ ุฅุนุงุฏุฉ ุจูุงุก ุงููุดุฑูุน:

```bash
dotnet build
```

### 3๏ธโฃ ุงูุชุดุบูู ูุงูุงุฎุชุจุงุฑ:

1. ุงูุชุญ ุงูุชุทุจูู
2. ุงุฐูุจ ุฅูู ูุณู ุงูุนูุฑุฉ
3. ุฃูุดุฆ ุญุฒูุฉ ุฌุฏูุฏุฉ ุฃู ุนุฏู ุญุฒูุฉ ููุฌูุฏุฉ
4. ุฌุฑุจ ุฅุถุงูุฉ ูุนุชูุฑูู ูุน ุชุญุฏูุฏ ููุน ุงูุบุฑูุฉ ูุฑูููุง

---

ุชู ุจูุฌุงุญ! โ

ุงูุขู ููููู ุฅุฏุงุฑุฉ ุงูุบุฑู ูุงููุนุชูุฑูู ุจุดูู ุฃูุถู ูุฃูุซุฑ ุชูุธููุงู! ๐
