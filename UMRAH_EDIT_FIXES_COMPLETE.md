# ุฅุตูุงุญ ูุดุงูู ูุณู ุงูุนูุฑุฉ - ุชูุฑูุฑ ููุงุฆู

## ุงูุชุงุฑูุฎ: 13 ูุจุฑุงูุฑ 2026

## ุงููุดุงูู ุงูููุญุฏุฏุฉ:

### 1. ุนุฏู ุญูุธ ุงูุชุนุฏููุงุช ุนูุฏ ุงูุชุญุฏูุซ โ
**ุงููุตู:** ุนูุฏ ุชุนุฏูู ุญุฒูุฉ ุนูุฑุฉ ููุฌูุฏุฉุ ูุง ูุชู ุญูุธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุณุจุจ:** 
- ูุงูุช ููุงู ูุดููุฉ ูู ููููุฉ ุชุชุจุน Entity Framework ููููุงูุงุช ุงููุนุฏูุฉ
- ูุงู ูุชู ุฅุถุงูุฉ ุงููุนุชูุฑูู ุงูุฌุฏุฏ ูุจู ุญุฐู ุงููุฏุงูู ุจุดูู ุตุญูุญ

**ุงูุญู ุงููุทุจู:**
```csharp
// ูู UmrahService.cs - ุฏุงูุฉ UpdatePackageAsync

// ุงูุทุฑููุฉ ุงููุฏููุฉ (ุบูุฑ ูุนุงูุฉ):
_context.UmrahPilgrims.RemoveRange(existing.Pilgrims);
existing.Pilgrims.Clear();
// ูุงูุช ุชุณุจุจ ูุดุงูู ูู ุงูุชุชุจุน

// ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ (ูุญุณูุฉ):
var oldPilgrims = existing.Pilgrims.ToList(); // ูุณุฎุฉ ุขููุฉ
foreach (var oldPilgrim in oldPilgrims)
{
    _context.UmrahPilgrims.Remove(oldPilgrim);
}
existing.Pilgrims.Clear();
await _context.SaveChangesAsync(); // ุญูุธ ุงูุญุฐู ุฃููุงู

// ุซู ุฅุถุงูุฉ ูุนุชูุฑูู ุฌุฏุฏ ุจููุงูุงุช ุฌุฏูุฏุฉ ุชูุงูุงู
foreach (var pilgrim in package.Pilgrims)
{
    var newPilgrim = new UmrahPilgrim { /* ุจูุงูุงุช ุฌุฏูุฏุฉ */ };
    existing.Pilgrims.Add(newPilgrim);
}
```

### 2. ุธููุฑ ูุตูุต ุฅูุฌููุฒูุฉ ุจุฏูุงู ูู ุงูุนุฑุจูุฉ โ
**ุงููุตู:** ุนูุฏ ูุชุญ ุญุฒูุฉ ููุชุนุฏููุ ุชุธูุฑ ููู ููุน ุงูุบุฑูุฉ ุจุงูุฅูุฌููุฒูุฉ ุจุฏูุงู ูู ุงูุนุฑุจูุฉ

**ุงูุณุจุจ:**
- ุงูู Enum ุฏุงุฎููุงู ูุฎุฒู ุงูููู ุจุงูุฅูุฌููุฒูุฉ
- ูู ููู ุงูุชุญููู ูู ูุฅูู ุงูุนุฑุจูุฉ ูุบุทู ูู ุงูุญุงูุงุช

**ุงูุญู ุงููุทุจู:**

1. **ุชุญุฏูุซ ุฏุงูุฉ GetRoomTypeFromDisplay:**
```csharp
private RoomType GetRoomTypeFromDisplay(string? display)
{
    if (string.IsNullOrWhiteSpace(display))
        return RoomType.Double;
        
    // ุงูุชุนุงูู ูุน ูู ุงูุญุงูุงุช ุงูููููุฉ (ุนุฑุจู ูุฅูุฌููุฒู)
    return display.Trim() switch
    {
        "ูุฑุฏู" or "ููุฑุฏุฉ" or "Single" => RoomType.Single,
        "ูุฒุฏูุฌ" or "ุซูุงุฆู" or "Double" => RoomType.Double,
        "ุซูุงุซู" or "Triple" => RoomType.Triple,
        "ุฑุจุงุนู" or "Quad" => RoomType.Quad,
        "ุฎูุงุณู" or "Quint" => RoomType.Quint,
        "ุฌูุงุญ" or "Suite" => RoomType.Suite,
        _ => RoomType.Double
    };
}
```

2. **ุชูุญูุฏ ุงููุตุทูุญุงุช ุงูุนุฑุจูุฉ:**
- ูู ComboBox ุงูุฑุฆูุณู: `{"ููุฑุฏุฉ", "ุซูุงุฆู", "ุซูุงุซู", "ุฑุจุงุนู", "ุฎูุงุณู"}`
- ูู DataGridView: ููุณ ุงูููู ููุชูุงุณู

3. **ุชุญุฏูุซ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ:**
```csharp
// ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุขู "ุซูุงุฆู" ุจุฏูุงู ูู "ูุฒุฏูุฌ"
string roomType = i < currentData.Count && !string.IsNullOrWhiteSpace(currentData[i].roomType) 
    ? currentData[i].roomType 
    : "ุซูุงุฆู"; // โ ุนุฑุจู ุฏุงุฆูุงู
```

4. **ุฅุถุงูุฉ Console.WriteLine ููุชุชุจุน:**
```csharp
Console.WriteLine($"๐ Pilgrim {i+1}: Name={pilgrimName}, DisplayType={roomTypeDisplay}, EnumType={pilgrimRoomType}");
```

## ุงููููุงุช ุงููุนุฏูุฉ:

### 1. `Application/Services/UmrahService.cs`
- ุชุญุณูู ุฏุงูุฉ `UpdatePackageAsync` ูุญูุธ ุงูุชุนุฏููุงุช ุจุดูู ุตุญูุญ
- ุฅุถุงูุฉ ุญูุธ ูุฑุญูู ุจุนุฏ ุญุฐู ุงููุนุชูุฑูู ุงููุฏุงูู
- ุฅูุดุงุก ููุงูุงุช ุฌุฏูุฏุฉ ุชูุงูุงู ูููุนุชูุฑูู ุงูุฌุฏุฏ

### 2. `Presentation/Forms/AddEditUmrahPackageForm.cs`
- ุชุญุฏูุซ `GetRoomTypeFromDisplay` ูุฏุนู ุงูุนุฑุจู ูุงูุฅูุฌููุฒู
- ุชูุญูุฏ ุงููุตุทูุญุงุช ูู ComboBox ู DataGridView
- ุชุญุฏูุซ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ุฅูู "ุซูุงุฆู"
- ุฅุถุงูุฉ logging ูุชุชุจุน ุนูููุฉ ุงูุชุญููู

## ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช:

### ุณููุงุฑูู 1: ุฅูุดุงุก ุญุฒูุฉ ุฌุฏูุฏุฉ
1. โ ูุชุญ ููุฑู ุฅุถุงูุฉ ุญุฒูุฉ ุนูุฑุฉ
2. โ ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
3. โ ุฅุถุงูุฉ ูุนุชูุฑูู ูุน ุฃููุงุน ุบุฑู ูุฎุชููุฉ
4. โ ุงูุญูุธ ุจูุฌุงุญ
5. โ ุงูุชุญูู ูู ุญูุธ ุงูุจูุงูุงุช ุจุงูุนุฑุจูุฉ

### ุณููุงุฑูู 2: ุชุนุฏูู ุญุฒูุฉ ููุฌูุฏุฉ
1. โ ูุชุญ ุญุฒูุฉ ููุฌูุฏุฉ ููุชุนุฏูู
2. โ ุงูุชุญูู ูู ุธููุฑ ุจูุงูุงุช ุงููุนุชูุฑูู ุจุงูุนุฑุจูุฉ
3. โ ุชุนุฏูู ุจูุงูุงุช ุงููุนุชูุฑูู (ุฅุถุงูุฉ/ุญุฐู/ุชุนุฏูู)
4. โ ุญูุธ ุงูุชุนุฏููุงุช
5. โ ุฅุนุงุฏุฉ ูุชุญ ุงูุญุฒูุฉ ููุชุญูู ูู ุญูุธ ุงูุชุบููุฑุงุช
6. โ ุงูุชุญูู ูู ุจูุงุก ุงููุตูุต ุนุฑุจูุฉ

### ุณููุงุฑูู 3: ุญุงูุงุช ุงูุญูุงู
1. โ ุญุฒูุฉ ุจุฏูู ูุนุชูุฑูู
2. โ ุญุฒูุฉ ุจูุนุชูุฑ ูุงุญุฏ
3. โ ุญุฒูุฉ ุจุนุฏุฏ ูุจูุฑ ูู ุงููุนุชูุฑูู
4. โ ุญุฐู ูู ุงููุนุชูุฑูู ูู ุญุฒูุฉ ููุฌูุฏุฉ
5. โ ุชุบููุฑ ููุน ุงูุบุฑูุฉ ูุฌููุน ุงููุนุชูุฑูู

## ููุงุญุธุงุช ูููุฉ:

### 1. ุงูุชูุงูููุฉ ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ:
- โ ุงูููุฏ ุงูุขู ูุฏุนู ุงูููู ุงูุฅูุฌููุฒูุฉ ุงููุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงูุชุญููู ุงูุชููุงุฆู ููุนุฑุจูุฉ ุนูุฏ ุงูุชุญููู
- โ ุงูุญูุธ ุฏุงุฆูุงู ูุณุชุฎุฏู Enum ุงูุตุญูุญ

### 2. ุงูุฃุฏุงุก:
- โ ุญูุธ ูุฑุญูู ููุญุฐู ูููุน ูุดุงูู ุงูุชุชุจุน
- โ ุฅูุดุงุก ููุงูุงุช ุฌุฏูุฏุฉ ูุถูู ุนุฏู ุชุถุงุฑุจ ุงูุญุงูุงุช
- โ ุงุณุชุฎุฏุงู Console.WriteLine ููุชุชุจุน ูู ุญุงูุฉ ุงููุดุงูู

### 3. ุงูุตูุงูุฉ ุงููุณุชูุจููุฉ:
- โ ุงูููุฏ ููุซู ุฌูุฏุงู
- โ ุฑุณุงุฆู Console ูุงุถุญุฉ ูููุณุงุนุฏุฉ ูู ุงูุชุดุฎูุต
- โ ุฏูุงู ุงูุชุญููู ูุงุจูุฉ ููุชูุณุน ุจุณูููุฉ

## ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ุงูููุตู ุจูุง:

1. **ูุจู ุงููุดุฑ:**
   - ุงุฎุชุจุงุฑ ุฅูุดุงุก 5 ุญุฒู ุฌุฏูุฏุฉ ูุฎุชููุฉ
   - ุชุนุฏูู ูู ุญุฒูุฉ ูุฑุชูู ุนูู ุงูุฃูู
   - ุงุฎุชุจุงุฑ ุฌููุน ุฃููุงุน ุงูุบุฑู
   - ุงูุชุญูู ูู ุญูุธ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

2. **ุจุนุฏ ุงููุดุฑ:**
   - ูุฑุงูุจุฉ ุฑุณุงุฆู Console ููุชุญูู ูู ุณูุงุณุฉ ุงูุนูููุงุช
   - ุฌูุน ููุงุญุธุงุช ุงููุณุชุฎุฏููู
   - ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุจูุงูุงุช ููููุฏุฉ

## ุงูุญุงูุฉ ุงูููุงุฆูุฉ:
โ **ุชู ุฅุตูุงุญ ุงููุดููุชูู ุจูุฌุงุญ**

- ุนูููุฉ ุงูุญูุธ ุชุนูู ุจุดูู ุตุญูุญ ุงูุขู
- ุฌููุน ุงููุตูุต ุชุธูุฑ ุจุงูุนุฑุจูุฉ ุฏุงุฆูุงู
- ุงูุชูุงูู ุงููุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ
- ุงูููุฏ ูุญุณู ููุฃุฏุงุก ูููููู ููุตูุงูุฉ ุงููุณุชูุจููุฉ

---

**ุชู ุงูุชูููุฐ ุจูุงุณุทุฉ:** Claude (Desktop Commander)
**ุงูุชุงุฑูุฎ:** 13 ูุจุฑุงูุฑ 2026
